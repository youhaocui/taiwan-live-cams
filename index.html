<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="utf-8" />
  <title>å°ç£å³æ™‚ç›´æ’­å››åˆ†å‰²ç›£çœ‹ï¼ˆLive Edge ç©©å®šç‰ˆï¼‰</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    /* =============================================================================
       ç‰ˆé¢èˆ‡é¢¨æ ¼ç¸½è¿°ï¼š
       - å…¨ç•«é¢é»‘åº•ï¼Œå››åˆ†å‰²ç›´æ’­èˆå°ï¼Œä¸Šæ–¹ç‚ºå½±ç‰‡ï¼Œä¸‹æ–¹ç‚ºæ§åˆ¶åˆ—ã€‚
       - æ§åˆ¶åˆ—è£¡åŒ…å«ï¼šå››æ ¼é¸æ“‡ã€ç¸£å¸‚èˆ‡æ™¯é»é¸å–®ï¼ˆæ°´å¹³æ²å‹•ï¼‰ã€å…¨è¢å¹•ã€æ¨™ç±¤éš±è—ã€å…¨å±€éœéŸ³ã€
         éŸ³æ¨‚åŠŸèƒ½çš„ã€Œè«‹æ±‚/æ¸…å–®ã€èˆ‡ã€Œä¸Šä¸€é¦–/æ’­æ”¾æš«åœ/ä¸‹ä¸€é¦–/æ¨¡å¼/æ¸…å–®ç‹€æ…‹ã€ã€‚
       - ä»‹é¢è¿½æ±‚ç·Šæ¹Šèˆ‡ä¸€è‡´ï¼Œé¿å…å¤šé¤˜ç‹€æ…‹èˆ‡ UIã€‚
       ============================================================================ */

    html,body{
      height:100%; margin:0; padding:0; background:#000;
      font-family: system-ui, sans-serif; color:#fff; overflow:hidden;
    }

    /* -----------------------------------------------------------------------------
       åº•éƒ¨æ§åˆ¶åˆ—ï¼š
       - å›ºå®šåœ¨é é¢åº•éƒ¨ï¼Œæä¾›ä¸»è¦æ“ä½œã€‚
       - ä½¿ç”¨ flex æ©«å‘æ’åˆ—ï¼Œå…§éƒ¨å…ƒç´ é–“è·ä¸€è‡´ã€‚
       --------------------------------------------------------------------------- */
    .controls{
      position:fixed; bottom:0; left:0; width:100%; height:78px;
      background:rgba(12,12,12,0.95); color:#fff; padding:8px 12px;
      box-sizing:border-box; display:flex; flex-direction:row; align-items:center;
      gap:10px; z-index:3000; overflow:hidden;
    }
    .controls button{
      background-color:#222; color:#fff; border:1px solid #444;
      padding:8px 12px; font-size:13px; cursor:pointer;
      border-radius:6px;
      height:40px; flex-shrink:0; white-space:nowrap; text-align:center;
    }
    .controls button.active{ background-color:#0078d7; border-color:#0078d7; }
    .divider{ width:1px; height:60%; background:#333; flex-shrink:0; margin:0; }

    /* -----------------------------------------------------------------------------
       ç¸£å¸‚ / æ™¯é»å®¹å™¨ï¼ˆå¯æ°´å¹³æ²å‹•ï¼‰ï¼š
       - ç›´æ¥åœ¨æ§åˆ¶åˆ—ã€Œåˆ—å‡ºç¸£å¸‚åç¨±ã€ä»¥åŠã€Œæ¯å€‹ç¸£å¸‚ä¸‹æ‰€æœ‰æ™¯é»æŒ‰éˆ•ã€ã€‚
       - æ»‘å‹•æ»¾å‹•ä»¥å®¹ç´å¤§é‡é …ç›®ã€‚
       --------------------------------------------------------------------------- */
    #regionButtons{
      display:flex;
      flex-grow:1; min-width:0; gap:6px;
      overflow-x:auto; padding-bottom:6px; height:100%; align-items:center;
    }
    #regionButtons::-webkit-scrollbar{ height:6px; background-color:rgba(255,255,255,0.06); }
    #regionButtons::-webkit-scrollbar-thumb{ background-color:#444; border-radius:3px; }
    .region-label{ color:#fff; margin:0 8px 0 4px; font-weight:600; flex-shrink:0; user-select:none; }
    .city-label{
      color:#0af; font-weight:700; margin:0 6px; flex-shrink:0; user-select:none;
    }
    #regionButtons .city-btn{
      background-color:#111; color:#fff; border:1px solid #555;
      padding:6px 10px; margin:0 4px;
      border-radius:6px; cursor:pointer;
      height:36px; flex-shrink:0; font-size:13px;
    }
    #regionButtons .city-btn:hover{ background-color:#1a1a1a; border-color:#666; }

    /* -----------------------------------------------------------------------------
       å½±ç‰‡èˆå°å››æ ¼ï¼š
       - ä»¥ CSS Grid ä½ˆå±€ï¼Œå…©è¡Œå…©åˆ—ã€‚
       - æ¯æ ¼è¦†è“‹ YouTube iFrameï¼Œä¸¦ä»¥ transform å¾®èª¿è¦–è¦ºå……æ»¿ã€‚
       - interaction-shield ç”¨æ–¼é˜»æ“‹ YouTube å…§å»º UI çš„äº’å‹•ï¼ˆé¿å…å‡ºç¾æ¨è–¦èˆ‡æ“ä½œï¼‰ã€‚
       --------------------------------------------------------------------------- */
    .stage-wrap{
      position:fixed; top:0; left:0; width:100vw;
      height:calc(100vh - 78px);
      display:grid; grid-template-columns:1fr 1fr; grid-template-rows:1fr 1fr;
      gap:0; z-index:1;
    }
    .cell{ position:relative; width:100%; height:100%; overflow:hidden; background:#000; }
    .player-container, .player-container iframe{
      position:absolute; inset:0; width:100%; height:100%; border:0; display:block;
      object-fit:cover; object-position:center;
      background:black;
      transform: scale(1.65) translateY(-6%);
    }
    .interaction-shield{
      position:absolute; inset:0; z-index:9999; background:transparent;
      pointer-events:auto; cursor:default;
    }

    /* ä¸‹æ–¹æ¨™ç±¤ï¼šé¡¯ç¤ºæ™¯é»åç¨±èˆ‡ä¾†æºï¼ˆå¯å…¨å±€éš±è—ï¼‰ */
    .label{
      position:absolute; left:8px; right:8px; bottom:8px; display:flex;
      flex-direction:column; align-items:flex-start; padding:6px 8px;
      font-size:14px; color:#fff; background:rgba(0,0,0,0.6); border-radius:6px;
      pointer-events:none; z-index:10000;
    }
    .source-on-screen{ font-size:11px; color:#ccc; margin-top:4px; line-height:1.1; }

    /* é¡¯ç¤ºæ§åˆ¶ï¼šéš±è—æ¨™ç±¤èˆ‡å…¨è¢å¹•æ¨¡å¼ */
    .hide-labels .label{ display:none; }
    .fullscreen-active .controls{ display:none; }
    .fullscreen-active .stage-wrap{ height:100vh; }

    @media (max-width:640px){
      .controls{ padding:6px 8px; height:80px; }
      .controls button{ padding:6px 8px; font-size:12px; height:36px; }
      #regionButtons .city-btn{ padding:6px 8px; font-size:12px; height:34px; }
    }
    
    /* -----------------------------------------------------------------------------
       éŸ³æ¨‚æ§åˆ¶å€å¡Šï¼ˆç·Šæ¹Šæ ¼å¼ï¼‰ï¼š
       - é è¨­éš±è—ï¼Œç•¶æœ‰æ’­æ”¾æ¸…å–®æˆ–åŠ å…¥æ­Œæ›²å¾Œé¡¯ç¤ºã€‚
       - ä¸€è‡´çš„æ–¹å½¢æŒ‰éˆ•ï¼Œç¢ºä¿å¯†é›†æ“ä½œèˆ’é©ã€‚
       --------------------------------------------------------------------------- */
    .music-controls-container {
        display: none; 
        flex-shrink: 0;
        height: 100%;
        align-items: center;
    }
    .music-controls { display: flex; gap: 5px; }
    .music-controls button {
        background-color: #222; color: #fff; border: 1px solid #444;
        border-radius: 6px; cursor: pointer;
        height: 40px; width: 40px; padding: 0; font-size: 16px; line-height: 1;
        flex-shrink: 0; display: flex; align-items: center; justify-content: center;
    }
  </style>
</head>
<body>
  <!-- ==========================================================================
       åº•éƒ¨æ§åˆ¶åˆ—ï¼šå››æ ¼é¸æ“‡ + ç¸£å¸‚æ™¯é» + é¡¯ç¤ºæ§åˆ¶ + éŸ³æ¨‚æ§åˆ¶
       ======================================================================= -->
  <div class="controls" id="controls">
    <!-- å››æ ¼é¸æ“‡ï¼šé¸ä¸­æ ¼çš„æŒ‰éˆ•æœƒåŠ ä¸Š .active -->
    <button id="select-cam-0" class="active" onclick="selectCam(0)">å·¦ä¸Š</button>
    <button id="select-cam-1" onclick="selectCam(1)">å³ä¸Š</button>
    <button id="select-cam-2" onclick="selectCam(2)">å·¦ä¸‹</button>
    <button id="select-cam-3" onclick="selectCam(3)">å³ä¸‹</button>

    <div class="divider"></div>

    <!-- ç›´æ¥åœ¨æ§åˆ¶åˆ—é¡¯ç¤ºç¸£å¸‚èˆ‡æ™¯é»æŒ‰éˆ•ï¼ˆå¯æ°´å¹³æ²å‹•ï¼‰ -->
    <div id="regionButtons" aria-label="ç¸£å¸‚èˆ‡æ™¯é»é¸å–®" role="toolbar"></div>

    <div class="divider"></div>
    <button id="fullscreenBtn" onclick="toggleFullscreen()">å…¨è¢å¹•</button>

    <div class="divider"></div>
    <button id="labelsToggleBtn" onclick="toggleLabels()">æ¨™ç±¤éš±è—</button>

    <div class="divider"></div>
    <button id="muteBtn" onclick="toggleMute()">è§£é™¤éœéŸ³</button>

    <div class="divider"></div>
    <!-- éŸ³æ¨‚åŠŸèƒ½å…¥å£ï¼šå¯è¼¸å…¥å½±ç‰‡/æ¸…å–®ç¶²å€æˆ–ID -->
    <button id="requestBtn" onclick="requestSong()" title="è¼¸å…¥ç¶²å€/IDé»æ­Œæˆ–æ’­æ”¾æ¸…å–®">ğŸ¶ é»æ­Œ/æ¸…å–®</button>

    <!-- éŸ³æ¨‚æ§åˆ¶æŒ‰éˆ•ï¼ˆé è¨­éš±è—ï¼Œè¼‰å…¥æ¸…å–®æˆ–åŠ å…¥æ­Œæ›²å¾Œé¡¯ç¤ºï¼‰ -->
    <div id="musicControlsContainer" class="music-controls-container">
      <div class="music-controls">
        <button id="prevSongBtn" onclick="skipToPreviousSong()" title="ä¸Šä¸€é¦–">â®ï¸</button>
        <button id="playPauseBtn" onclick="playPauseSong()" title="æ’­æ”¾/æš«åœ">â–¶ï¸</button>
        <button id="nextSongBtn" onclick="skipToNextSong()" title="ä¸‹ä¸€é¦–">â­ï¸</button>
        <button id="modeBtn" onclick="openMusicSettingsModal()" title="æ¨¡å¼è¨­å®š">ğŸ”„</button>
        <button id="playlistQueueBtn" onclick="showMusicQueueStatusModal()" title="æŸ¥çœ‹æ’­æ”¾åˆ—è¡¨ç‹€æ…‹">ğŸµ</button>
      </div>
    </div>
  </div>

  <!-- å››åˆ†å‰²ç›´æ’­èˆå° -->
  <div class="stage-wrap" id="stageWrap">
    <div class="cell" data-index="0">
      <div id="player0" class="player-container"></div>
      <div class="interaction-shield"></div>
      <div class="label" id="label0">è¼‰å…¥ä¸­...<span class="source-on-screen"></span></div>
    </div>
    <div class="cell" data-index="1">
      <div id="player1" class="player-container"></div>
      <div class="interaction-shield"></div>
      <div class="label" id="label1">è¼‰å…¥ä¸­...<span class="source-on-screen"></span></div>
    </div>
    <div class="cell" data-index="2">
      <div id="player2" class="player-container"></div>
      <div class="interaction-shield"></div>
      <div class="label" id="label2">è¼‰å…¥ä¸­...<span class="source-on-screen"></span></div>
    </div>
    <div class="cell" data-index="3">
      <div id="player3" class="player-container"></div>
      <div class="interaction-shield"></div>
      <div class="label" id="label3">è¼‰å…¥ä¸­...<span class="source-on-screen"></span></div>
    </div>
  </div>

  <!-- éŸ³æ¨‚æ’­æ”¾å™¨å®¹å™¨ï¼ˆéš±è—åœ¨è¢å¹•å¤–ï¼Œä½†ä»å¯è¼‰å…¥èˆ‡æ’­æ”¾ï¼‰ -->
  <div id="player_music_container" style="position:fixed; top:-100px; left:-100px; width:1px; height:1px; overflow:hidden;">
    <div id="player_music"></div>
  </div>

  <!-- éŸ³æ¨‚æ¨¡å¼è¨­å®š Modal -->
  <div id="musicSettingsModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.8); z-index:9999; justify-content:center; align-items:center;">
    <div style="background:#222; padding:20px; border-radius:10px; box-shadow:0 0 20px rgba(0,0,0,0.5); width:300px; max-width:90%; text-align:center;">
      <h3 style="margin-top:0; color:#fff;">éŸ³æ¨‚æ’­æ”¾æ¨¡å¼</h3>
      <p style="font-size:12px; color:#aaa;">é¸æ“‡æ¸…å–®æ’­æ”¾è¡Œç‚ºï¼š</p>
      <div style="display:flex; justify-content:space-around; gap:10px; margin-top:15px;">
        <button id="modeListLoop" class="mode-btn" onclick="setPlaybackMode('listLoop')">ğŸ”„ åˆ—è¡¨å¾ªç’°</button>
        <button id="modeShuffle" class="mode-btn" onclick="setPlaybackMode('shuffle')">ğŸ”€ éš¨æ©Ÿæ’­æ”¾</button>
      </div>
      <button onclick="stopAndCloseModal()" class="stop-btn">â¹ï¸ åœæ­¢ä¸¦çµæŸæ’­æ”¾</button>
      <button onclick="closeMusicSettingsModal()" class="close-btn">é—œé–‰</button>
    </div>
  </div>

  <!-- æ’­æ”¾åˆ—è¡¨ç‹€æ…‹ Modal -->
  <div id="musicQueueModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.8); z-index:9999; justify-content:center; align-items:center;">
    <div style="background:#222; padding:20px; border-radius:10px; box-shadow:0 0 20px rgba(0,0,0,0.5); width:350px; max-width:90%;">
      <h3 style="margin-top:0; color:#fff; text-align:center;">ğŸ¶ æ’­æ”¾åˆ—è¡¨ç‹€æ…‹</h3>
      <div id="queueListContent" style="margin-bottom:15px; padding-right:5px;"></div>
      <button onclick="closeMusicQueueModal()" style="margin-top:10px;">é—œé–‰</button>
    </div>
  </div>

  <!-- è¼‰å…¥ YouTube IFrame API -->
  <script src="https://www.youtube.com/iframe_api"></script>
  <script>
    /* =============================================================================
       è³‡æ–™çµæ§‹ï¼šç›´æ’­ä¾†æºæ¸…å–®
       - key æ ¼å¼ï¼šã€Œç¸£å¸‚-æ™¯é»ã€ï¼Œä¾‹å¦‚ã€Œå®œè˜­-çŸ³åŸæ¼æ¸¯ã€ã€‚
       - label ç‚ºæ§åˆ¶åˆ—ä¸Šé¡¯ç¤ºçš„æ™¯é»åç¨±ï¼ˆä¿®æ­£å®œè˜­çš„æ¨™ç±¤ä¸€è‡´ä¸”æº–ç¢ºï¼‰ã€‚
       - source ç‚ºä¾†æºå–®ä½ï¼Œé¡¯ç¤ºæ–¼æ¯æ ¼ä¸‹æ–¹æ¨™ç±¤ã€‚
       ============================================================================ */
    const ALL_STREAMS = {
      "å°åŒ—-è±¡å±±çœ‹101": {"id":"z_fY1pj1VBw","label":"å°åŒ—è±¡å±±","source":"Taipei Travel Live Cam å°åŒ—è§€å…‰å³æ™‚å½±åƒ"},
      "å°åŒ—-å¤§ç¨»åŸ•": {"id":"Ndo_8RuefH4","label":"å¤§ç¨»åŸ•","source":"Taipei Travel Live Cam å°åŒ—è§€å…‰å³æ™‚å½±åƒ"},
      "å°åŒ—-ç¢§å±±å·–": {"id":"uvwfYzwY8tg","label":"ç¢§å±±å·–","source":"Taipei Travel Live Cam å°åŒ—è§€å…‰å³æ™‚å½±åƒ"},
      "å°åŒ—-å¾®é¢¨å¹³å°": {"id":"34h_Cy_n0Ok","label":"å¾®é¢¨å¹³å°","source":"Taipei Travel Live Cam å°åŒ—è§€å…‰å³æ™‚å½±åƒ"},
      "å°åŒ—-è²“ç©ºæŒ‡å—å®®": {"id":"215ahZ_0rTg","label":"è²“ç©ºæŒ‡å—å®®","source":"Taipei Travel Live Cam å°åŒ—è§€å…‰å³æ™‚å½±åƒ"},
      "å°åŒ—-æ“å¤©å²¡è‰åŸ": {"id":"yF2LAyOvq0Q","label":"æ“å¤©å²¡è‰åŸ","source":"é™½æ˜å±±åœ‹å®¶å…¬åœ’"},
      "å°åŒ—-é™½æ˜æ›¸å±‹": {"id":"RttyIGHbN_w","label":"é™½æ˜æ›¸å±‹","source":"é™½æ˜å±±åœ‹å®¶å…¬åœ’"},
      "å°åŒ—-é çœºä¸ƒæ˜Ÿå±±": {"id":"PvJr2efA6n0","label":"é çœºä¸ƒæ˜Ÿå±±","source":"é™½æ˜å±±åœ‹å®¶å…¬åœ’"},
      "å°åŒ—-äºŒåªå­åœè»Šå ´": {"id":"d9KuXrPCWYU","label":"äºŒåªå­åœè»Šå ´","source":"é™½æ˜å±±åœ‹å®¶å…¬åœ’"},
      "å°åŒ—-å¤§å±¯è‡ªç„¶å…¬åœ’": {"id":"6ghffcNt3Nw","label":"å¤§å±¯è‡ªç„¶å…¬åœ’","source":"é™½æ˜å±±åœ‹å®¶å…¬åœ’"},
      "å°åŒ—-å°æ²¹å‘åœè»Šå ´": {"id":"kKD-ZBLs8-4","label":"å°æ²¹å‘åœè»Šå ´","source":"é™½æ˜å±±åœ‹å®¶å…¬åœ’"},
      "å°åŒ—-å†·æ°´å‘åœè»Šå ´": {"id":"GB64WeZZQPQ","label":"å†·æ°´å‘åœè»Šå ´","source":"é™½æ˜å±±åœ‹å®¶å…¬åœ’"},

      "æ–°åŒ—-æ¼äººç¢¼é ­": {"id":"xwAWSh35uuw","label":"æ·¡æ°´æ¼äººç¢¼é ­","source":"æ–°åŒ—æ—…å®¢ New Taipei Tour"},
      "æ–°åŒ—-é¼»é ­æœå‹™å€": {"id":"4Bm3IKcGkQY","label":"é¼»é ­æœå‹™å€","source":"necoast nsa"},
      "æ–°åŒ—-ä¸­è§’ç£": {"id":"mmM9NOZLLKY","label":"ä¸­è§’ç£","source":"GoOceanæµ·æ´‹éŠæ†©é¢¨éšªè³‡è¨Š"},
      "æ–°åŒ—-ååˆ†ç€‘å¸ƒå…¬åœ’": {"id":"HirBQsQEUeA","label":"ååˆ†ç€‘å¸ƒå…¬åœ’","source":"æ–°åŒ—æ—…å®¢ New Taipei Tour"},
      "æ–°åŒ—-ä¹ä»½": {"id":"XSD5ptYisw8","label":"ä¹ä»½","source":"æ–°åŒ—æ—…å®¢ New Taipei Tour"},
      "æ–°åŒ—-å…§æ´åœ‹å®¶æ£®æ—éŠæ¨‚å€": {"id":"lX2MYEFomK0","label":"å…§æ´åœ‹å®¶æ£®æ—éŠæ¨‚å€","source":"åœ‹å®¶æ£®æ—éŠæ¨‚å€å³æ™‚å½±åƒ"},
      "æ–°åŒ—-ä¸‰å³½è€è¡—åŒ—æ®µ": {"id":"M24SZJU-uoo","label":"ä¸‰å³½è€è¡—åŒ—æ®µ","source":"ä¸‰å³½æ°‘æ¬Šè€è¡—å•†åœˆ"},
      "æ–°åŒ—-ä¸‰å³½è€è¡—å—æ®µ": {"id":"R_5jhoux3nY","label":"ä¸‰å³½è€è¡—å—æ®µ","source":"ä¸‰å³½æ°‘æ¬Šè€è¡—å•†åœˆ"},
      "æ–°åŒ—-çƒä¾†åŠæ©‹": {"id":"jGoYvmTxLyU","label":"çƒä¾†åŠæ©‹","source":"æ°´åˆ©ç½²æ°´åˆ©é˜²ç½çµ„"},
      "æ–°åŒ—-å“¡å±±å­": {"id":"JkGKqXOt9Ls","label":"å“¡å±±å­","source":"æ°´åˆ©ç½²æ°´åˆ©é˜²ç½çµ„"},
      "æ–°åŒ—-æ–‡å±±è¾²å ´å¤§è‰çš®": {"id":"_LRkfObNP_U","label":"æ–‡å±±è¾²å ´å¤§è‰çš®","source":"æ–°åŒ—å¸‚è¾²æœƒæ–‡å±±è¾²å ´"},

      "åŸºéš†-å¤–æœ¨å±±": {"id":"LInNQYAbAwQ","label":"å¤–æœ¨å±±","source":"GoOceanæµ·æ´‹éŠæ†©é¢¨éšªè³‡è¨Š"},

      "æ¡ƒåœ’-åœ‹éš›æ©Ÿå ´": {"id":"91PfFoqvuUk","label":"æ¡ƒåœ’åœ‹éš›æ©Ÿå ´","source":"éŠæ¡ƒåœ’ Taoyuan Travel"},
      "æ¡ƒåœ’-æ¡ƒåœ’æ©Ÿå ´å—è·‘é“": {"id":"y3_x8el5ZJY","label":"TPE å—è·‘é“","source":"Taoyuan Airport"},
      "æ¡ƒåœ’-æ¡ƒåœ’æ©Ÿå ´åŒ—è·‘é“": {"id":"wWEnxWA7nnY","label":"TPE åŒ—è·‘é“","source":"Taoyuan Airport"},
      "æ¡ƒåœ’-æ°¸å®‰æ¼æ¸¯": {"id":"tD_a03trUvE","label":"æ°¸å®‰æ¼æ¸¯","source":"éŠæ¡ƒåœ’ Taoyuan Travel"},
      "æ¡ƒåœ’-æ‹‰æ‹‰å±±éŠå®¢ä¸­å¿ƒ": {"id":"YkIUZjVlhv4","label":"æ‹‰æ‹‰å±±éŠå®¢ä¸­å¿ƒ","source":"éŠæ¡ƒåœ’ Taoyuan Travel"},
      "æ¡ƒåœ’-è™é ­å±±ç’°ä¿å…¬åœ’": {"id":"tu_gsIkNt-w","label":"è™é ­å±±ç’°ä¿å…¬åœ’","source":"éŠæ¡ƒåœ’ Taoyuan Travel"},
      "æ¡ƒåœ’-å°çƒä¾†å¤©ç©ºæ­¥é“": {"id":"neaiCec1kec","label":"å°çƒä¾†å¤©ç©ºæ­¥é“","source":"éŠæ¡ƒåœ’ Taoyuan Travel"},
      "æ¡ƒåœ’-è§’æ¿å±±æ€è¦ªäº­": {"id":"3Za9y4z_Lzc","label":"è§’æ¿å±±æ€è¦ªäº­","source":"éŠæ¡ƒåœ’ Taoyuan Travel"},
      "æ¡ƒåœ’-ä¸‰é¾œæˆ²æ°´è§€æ™¯å¹³å°": {"id":"5YDXZ1aiR5Y","label":"ä¸‰é¾œæˆ²æ°´è§€æ™¯å¹³å°","source":"éŠæ¡ƒåœ’ Taoyuan Travel"},
      "æ¡ƒåœ’-å¤§æºªæ©‹": {"id":"oFJ6gCaBb_Q","label":"å¤§æºªæ©‹","source":"éŠæ¡ƒåœ’ Taoyuan Travel"},
      "æ¡ƒåœ’-è™é ­å±±å¥§çˆ¾æ£®æ—å­¸å ‚": {"id":"yQSmajHyMhU","label":"å¥§çˆ¾æ£®æ—å­¸å ‚","source":"éŠæ¡ƒåœ’ Taoyuan Travel"},
      "æ¡ƒåœ’-è§’æ¿å±±æ¢…åœ’": {"id":"-xT1bZhWLuU","label":"è§’æ¿å±±æ¢…åœ’","source":"éŠæ¡ƒåœ’ Taoyuan Travel"},
      "æ¡ƒåœ’-è§’æ¿å±±ç”Ÿæ…‹æ± ": {"id":"XEbo8NzMTbQ","label":"è§’æ¿å±±ç”Ÿæ…‹æ± ","source":"éŠæ¡ƒåœ’ Taoyuan Travel"},
      "æ¡ƒåœ’-å¤§æºªè€è¡—": {"id":"XUWjAsajKXg","label":"å¤§æºªè€è¡—","source":"éŠæ¡ƒåœ’ Taoyuan Travel"},
      "æ¡ƒåœ’-çŸ³é–€æ°´åº«": {"id":"GUCaVR88ZFU","label":"çŸ³é–€æ°´åº«","source":"éŠæ¡ƒåœ’ Taoyuan Travel"},
      "æ¡ƒåœ’-æ…ˆæ¹–æ°´å²¸å»£å ´": {"id":"pSQ0e-ZTZ5g","label":"æ…ˆæ¹–æ°´å²¸å»£å ´","source":"éŠæ¡ƒåœ’ Taoyuan Travel"},
      "æ¡ƒåœ’-é˜¿å§†åªè–‘æ¯å³¶": {"id":"EUOp2LchPQM","label":"è–‘æ¯å³¶","source":"éŠæ¡ƒåœ’ Taoyuan Travel"},
      "æ¡ƒåœ’-ä¸Šå·´é™µ": {"id":"nV-DKquUjFs","label":"ä¸Šå·´é™µ","source":"éŠæ¡ƒåœ’ Taoyuan Travel"},
      "æ¡ƒåœ’-æ¡ƒåœ’åœ‹éš›æ©Ÿå ´å‡±æ‚…é…’åº—": {"id":"68GFgzQxrXs","label":"æ©Ÿå ´å‡±æ‚…","source":"éŠæ¡ƒåœ’ Taoyuan Travel"},
      "æ¡ƒåœ’-å°çƒä¾†å¯°å®‡å¹³å°": {"id":"PJWye36lEj4","label":"å¯°å®‡å¹³å°","source":"éŠæ¡ƒåœ’ Taoyuan Travel"},
      "æ¡ƒåœ’-è¨±åæ¸¯æ¿•åœ°": {"id":"44JArbF682k","label":"è¨±åæ¸¯æ¿•åœ°","source":"éŠæ¡ƒåœ’ Taoyuan Travel"},

      /* å®œè˜­ï¼šä¿®æ­£éå»æ¨™ç±¤æ··æ·†ï¼ˆèˆŠéš§é“å—å£ä¸è¦é¡¯ç¤ºç‚ºçŸ³åŸæ¼æ¸¯ï¼‰ */
      "å®œè˜­-å¤–æ¾³æ²™ç˜": {"id":"UgoT-QTbYvo","label":"å¤–æ¾³æ²™ç˜","source":"necoast nsa"},
      "å®œè˜­-ç¦éš†æµ·æ°´æµ´å ´": {"id":"mMG7v_fET5A","label":"ç¦éš†æµ·æ°´æµ´å ´","source":"necoast nsa"},
      "å®œè˜­-èˆŠéš§é“å—å£": {"id":"X76Dkt_fPG0","label":"èˆŠéš§é“å—å£","source":"necoast nsa"},
      "å®œè˜­-ç„¡å°¾æ¸¯": {"id":"Bux0vT_5MBw","label":"ç„¡å°¾æ¸¯","source":"GoOceanæµ·æ´‹éŠæ†©é¢¨éšªè³‡è¨Š"},
      "å®œè˜­-çŸ³åŸæ¼æ¸¯": {"id":"ozZVLl0h--A","label":"çŸ³åŸæ¼æ¸¯","source":"GoOceanæµ·æ´‹éŠæ†©é¢¨éšªè³‡è¨Š"},
      "å®œè˜­-ç¤æºªå¯’æ²é…’åº—": {"id":"cPh2vzrtG_w","label":"ç¤æºªå¯’æ²é…’åº—","source":"MU JIAO XI HOTEL"},

      "è‹—æ —-æ±¶æ°´éŠå®¢ä¸­å¿ƒ(é›ªéœ¸)": {"id":"VgmWVBUsfGo","label":"æ±¶æ°´éŠå®¢ä¸­å¿ƒ","source":"é›ªéœ¸åœ‹å®¶å…¬åœ’"},
      "è‹—æ —-è§€éœ§éŠæ†©å€(é›ªéœ¸)": {"id":"Isp6RQiuxNo","label":"è§€éœ§éŠæ†©å€","source":"é›ªéœ¸åœ‹å®¶å…¬åœ’"},
      "è‹—æ —-é›ªè¦‹éŠæ†©å€(é›ªéœ¸)": {"id":"2KDE860OW_A","label":"é›ªè¦‹éŠæ†©å€","source":"é›ªéœ¸åœ‹å®¶å…¬åœ’"},

      "å°ä¸­-é«˜ç¾æ¿•åœ°": {"id":"fjhg3gAnMFg","label":"é«˜ç¾æ¿•åœ°","source":"è‡ºä¸­è§€å…‰æ—…éŠå±€"},
      "å°ä¸­-æœ›é«˜å¯®": {"id":"lhXXhDyjFtI","label":"æœ›é«˜å¯®","source":"è‡ºä¸­è§€å…‰æ—…éŠå±€"},

      "å½°åŒ–-ç‹åŠŸæ¼æ¸¯": {"id":"hUG2XK08W5Q","label":"ç‹åŠŸæ¼æ¸¯","source":"Changhua Travels"},

      "å—æŠ•-åˆæ­¡å±±æ­¦å¶ºäº­": {"id":"2lVMTs_Fj0M","label":"æ­¦å¶ºäº­","source":"å°ç£å³æ™‚å½±åƒç›£è¦–å™¨"},

      "å˜‰ç¾©-å¥®èµ·æ¹–": {"id":"B6eki-0-w0g","label":"å¥®èµ·æ¹–","source":"é˜¿é‡Œå±±åœ‹å®¶é¢¨æ™¯å€"},
      "å˜‰ç¾©-äºŒå»¶å¹³æ­¥é“": {"id":"j2L_559nCjc","label":"äºŒå»¶å¹³æ­¥é“","source":"é˜¿é‡Œå±±åœ‹å®¶é¢¨æ™¯å€"},
      "å˜‰ç¾©-å¤ªå¹³é›²æ¢¯": {"id":"dY2cRNr5Buw","label":"å¤ªå¹³é›²æ¢¯","source":"é˜¿é‡Œå±±åœ‹å®¶é¢¨æ™¯å€"},
      "å˜‰ç¾©-è§¸å£éŠå®¢ä¸­å¿ƒ": {"id":"8KnqJBf_dow","label":"è§¸å£éŠå®¢ä¸­å¿ƒ","source":"é˜¿é‡Œå±±åœ‹å®¶é¢¨æ™¯å€"},
      "å˜‰ç¾©-æ„›æƒ…å¤§è‰åŸ": {"id":"hMYs60qtkK8","label":"æ„›æƒ…å¤§è‰åŸ","source":"é˜¿é‡Œå±±åœ‹å®¶é¢¨æ™¯å€"},
      "å˜‰ç¾©-ç”ŸåŠ›è¾²å ´": {"id":"agEzlv9n9Eg","label":"ç”ŸåŠ›è¾²å ´","source":"é˜¿é‡Œå±±åœ‹å®¶é¢¨æ™¯å€"},
      "å˜‰ç¾©-é‡Œä½³è³‡è¨Šç«™": {"id":"zDt8FBPozZQ","label":"é‡Œä½³è³‡è¨Šç«™","source":"é˜¿é‡Œå±±åœ‹å®¶é¢¨æ™¯å€"},

      "å°å—-ä¸ƒè‚¡è³é³¥å°": {"id":"5KJe2gCTngA","label":"ä¸ƒè‚¡è³é³¥å°","source":"å°æ±Ÿåœ‹å®¶å…¬åœ’"},
      "å°å—-åŒ—æ±•å°¾æ°´é³¥ä¿è­·å€": {"id":"FES0gWTFUHQ","label":"åŒ—æ±•å°¾æ°´é³¥ä¿è­·å€","source":"å°æ±Ÿåœ‹å®¶å…¬åœ’"},
      "å°å—-æ›¾æ–‡æ°´åº«": {"id":"EH4V8IwFIp4","label":"æ›¾æ–‡æ°´åº«","source":"è¥¿æ‹‰é›…åœ‹å®¶é¢¨æ™¯å€"},
      "å°å—-ç«å±±ç¢§é›²å¯º": {"id":"zkX6X9p-6iA","label":"ç«å±±ç¢§é›²å¯º","source":"è¥¿æ‹‰é›…åœ‹å®¶é¢¨æ™¯å€"},

      "é«˜é›„-æ——æ´¥æµ·æ°´æµ´å ´": {"id":"ka7FV0sCvxQ","label":"æ——æ´¥æµ·æ°´æµ´å ´","source":"é«˜é›„æ—…éŠç¶²"},
      "é«˜é›„-å£½å±±è§€æ™¯å°": {"id":"C03Itx8iSC0","label":"å£½å±±è§€æ™¯å°","source":"é«˜é›„æ—…éŠç¶²"},

      "å±æ±-å¢¾ä¸å—ç£": {"id":"jUnFuJSj0OU","label":"å¢¾ä¸å—ç£","source":"æˆ‘æ„›å¢¾ä¸æ—…éŠç¥¨åˆ¸ä¸­å¿ƒ"},
      "å±æ±-å°ç‰çƒç™½æ²™å°¾": {"id":"P0_6Yg4V21g","label":"ç™½æ²™å°¾","source":"GoOceanæµ·æ´‹éŠæ†©é¢¨éšªè³‡è¨Š"},
      "å±æ±-å°ç‰çƒå¨å°¼æ–¯": {"id":"U4K6t8Wd2rU","label":"å¨å°¼æ–¯","source":"GoOceanæµ·æ´‹éŠæ†©é¢¨éšªè³‡è¨Š"},

      "èŠ±è“®-çŸ³æ¢¯åª": {"id":"mXnigLvIL0Q","label":"çŸ³æ¢¯åª","source":"æ±éƒ¨æµ·å²¸é¢¨æ™¯å€"},
      "èŠ±è“®-å¤§çŸ³é¼»å±±": {"id":"JkoXcXI04Qk","label":"å¤§çŸ³é¼»å±±","source":"æ±éƒ¨æµ·å²¸é¢¨æ™¯å€"},
      "èŠ±è“®-é•·è™¹æ©‹": {"id":"JnD8Rk3o0BM","label":"é•·è™¹æ©‹","source":"æ±éƒ¨æµ·å²¸é¢¨æ™¯å€"},

      "å°æ±-é¯‰é­šå±±": {"id":"BUJJaW0vkJs","label":"é¯‰é­šå±±","source":"å°æ±å°±é†¬ç©"},
      "å°æ±-é‡‘å´™å¤§æ©‹": {"id":"9QqBz3kNHis","label":"é‡‘å´™å¤§æ©‹","source":"å°æ±å°±é†¬ç©"},
      "å°æ±-é‡‘æ¨½è§€æµª": {"id":"q3KJt-SZc2s","label":"é‡‘æ¨½è§€æµª","source":"å°æ±å°±é†¬ç©"},
      "å°æ±-å¯Œå±±": {"id":"Rsq95SQ26bY","label":"å¯Œå±±","source":"å°æ±å°±é†¬ç©"},
      "å°æ±-æ‰åŸç£": {"id":"VqS_Y8ZCj6M","label":"æ‰åŸç£","source":"å°æ±å°±é†¬ç©"},
      "å°æ±-å¯Œå²¡æ¼æ¸¯": {"id":"D945F_dauls","label":"å¯Œå²¡æ¼æ¸¯","source":"å°æ±å°±é†¬ç©"},
      "å°æ±-è¯æºæ›™å…‰è§€æ™¯å°": {"id":"TY4qQElcUrA","label":"è¯æºæ›™å…‰è§€æ™¯å°","source":"å°æ±å°±é†¬ç©"},
      "å°æ±-å—æ©«åŸ¡å£": {"id":"LSkq-wHMxQY","label":"å—æ©«åŸ¡å£","source":"å°æ±å°±é†¬ç©"},
      "å°æ±-æ± ä¸Šå¤©å ‚è·¯": {"id":"6kUEK3LVrro","label":"æ± ä¸Šå¤©å ‚è·¯","source":"å°æ±å°±é†¬ç©"},
      "å°æ±-å¤šè‰¯è»Šç«™": {"id":"UCG1aXVO8H8","label":"å¤šè‰¯è»Šç«™","source":"å°æ±å°±é†¬ç©"},
      "å°æ±-é¹¿é‡é«˜å°": {"id":"rvc1klNIgQc","label":"é¹¿é‡é«˜å°","source":"ervnsa"},
      "å°æ±-æˆåŠŸä¸‰ä»™å°": {"id":"dQ7Sd6PGLdA","label":"ä¸‰ä»™å°","source":"æ±éƒ¨æµ·å²¸é¢¨æ™¯å€"},
      "å°æ±-é‡‘æ¨½éŠæ†©å€": {"id":"ZdqHgQwvZOw","label":"é‡‘æ¨½éŠæ†©å€","source":"æ±éƒ¨æµ·å²¸é¢¨æ™¯å€"},
      "å°æ±-éƒ½æ­·éŠå®¢ä¸­å¿ƒ": {"id":"JhQuR77AR7U","label":"éƒ½æ­·éŠå®¢ä¸­å¿ƒ","source":"æ±éƒ¨æµ·å²¸é¢¨æ™¯å€"},
      "å°æ±-åŠ è·¯è˜­éŠæ†©å€": {"id":"AKl3F6cAY2Q","label":"åŠ è·¯è˜­éŠæ†©å€","source":"æ±éƒ¨æµ·å²¸é¢¨æ™¯å€"},
      "å°æ±-ç¶ å³¶å—å¯®": {"id":"wTHhv7M0vCI","label":"ç¶ å³¶å—å¯®","source":"æ±éƒ¨æµ·å²¸é¢¨æ™¯å€"},
      "å°æ±-ç¶ å³¶å¸†èˆ¹é¼»": {"id":"pLdBc8PvZko","label":"ç¶ å³¶å¸†èˆ¹é¼»","source":"æ±éƒ¨æµ·å²¸é¢¨æ™¯å€"},
      "å°æ±-ç¶ å³¶æŸ´å£æµ®æ½›å€": {"id":"a8nJQr5rBGs","label":"ç¶ å³¶æŸ´å£æµ®æ½›å€","source":"æ±éƒ¨æµ·å²¸é¢¨æ™¯å€"},

      "é‡‘é–€-éº’éºŸå±±æ£®æ—å…¬åœ’": {"id":"M4EJtf_iP8s","label":"éº’éºŸå±±æ£®æ—å…¬åœ’","source":"æ¨‚éŠé‡‘é–€"},
      "é‡‘é–€-134é«˜åœ°": {"id":"-srNHTE-Nf0","label":"134é«˜åœ°","source":"æ¨‚éŠé‡‘é–€"},
      "é‡‘é–€-å»ºåŠŸå¶¼": {"id":"uh_yNAE01w8","label":"å»ºåŠŸå¶¼","source":"æ¨‚éŠé‡‘é–€"},

      "æ¾æ¹–-é–æ¸¯": {"id":"65Qk3X6fVbE","label":"é–æ¸¯","source":"GoOceanæµ·æ´‹éŠæ†©é¢¨éšªè³‡è¨Š"}
    };

    /* =============================================================================
       å…¨åŸŸè®Šæ•¸èˆ‡å¸¸æ•¸ï¼š
       - playersï¼šå››æ ¼ YouTube æ’­æ”¾å™¨å¯¦ä¾‹é™£åˆ—ã€‚
       - streamStateï¼šå„æ ¼ç›®å‰æ‰€è¼‰å…¥çš„ç›´æ’­ï¼ˆkeyã€idã€labelã€sourceï¼‰ã€‚
       - isMutedï¼šå…¨å±€éœéŸ³ç‹€æ…‹ï¼Œæ§åˆ¶å››æ ¼ç›´æ’­çš„éœéŸ³ã€‚
       - éŸ³æ¨‚æ’­æ”¾å™¨ç›¸é—œï¼šmusicPlayerã€musicQueueã€currentMusicIndexã€playbackMode ç­‰ã€‚
       - å»¶é²æª¢æ¸¬èˆ‡ä¿è­·ï¼šé¿å…ç›´æ’­è½å¾Œå¤ªå¤šç§’æ•¸æ™‚å°è‡´ UI å‡ºç¾æ¨è–¦æˆ–å¡ä½ã€‚
       ============================================================================ */
    const PLAYER_IDS = ['player0', 'player1', 'player2', 'player3'];
    const LABEL_IDS = ['label0', 'label1', 'label2', 'label3'];
    const DEFAULT_VIDEO_ID = "215ahZ_0rTg";

    let selectedCamIndex = 0;
    let players = [];
    let streamState = Array(4).fill(null);
    let isMuted = true;

    // éŸ³æ¨‚æ’­æ”¾å™¨ç›¸é—œè®Šæ•¸
    let musicPlayer = null;
    let musicQueue = [];          // è‡ªè¨‚å–®æ›²ä½‡åˆ—ï¼ˆä¸ä½¿ç”¨ YouTube playlist æ™‚ï¼‰
    let currentMusicIndex = -1;   // ç›®å‰æ’­æ”¾çš„ä½‡åˆ—ç´¢å¼•
    let playbackMode = 'listLoop'; // listLoop, shuffle
    let isPlaying = false;        // æ’­æ”¾ç‹€æ…‹ï¼Œç”¨æ–¼æ§åˆ¶æ’­æ”¾/æš«åœæŒ‰éˆ•æ–‡å­—
    let isMusicReady = false;     // IFrame API å°±ç·’æ——æ¨™
    let currentPlaylistId = null; // è‹¥è¼‰å…¥ YouTube playlistï¼Œè¨˜éŒ„å…¶ ID

    // ç›´æ’­å»¶é²åˆ·æ–°ä¿è­·ï¼ˆé¿å…å¾ªç’°è§¸ç™¼é‡è¼‰ï¼‰
    let lastReloadAt = [0, 0, 0, 0];
    let isReloading = [false, false, false, false]; 
    const RELOAD_COOLDOWN_MS = 60000; // 60 ç§’å†·å»æ™‚é–“

    // ä¾ç¸£å¸‚åˆ†çµ„ï¼ˆç”± ALL_STREAMS è‡ªå‹•åˆ†çµ„ï¼‰
    const GROUPED_STREAMS = {};
    Object.keys(ALL_STREAMS).forEach(key => {
      const city = key.split('-')[0];
      if (!GROUPED_STREAMS[city]) GROUPED_STREAMS[city] = [];
      GROUPED_STREAMS[city].push({ key: key, ...ALL_STREAMS[key] });
    });

    // å€åŸŸåˆ†ç¾¤ï¼ˆåƒ…ç”¨æ–¼æ§åˆ¶åˆ—çš„åˆ†æ®µæ¨™ç¤ºï¼‰
    const REGION_GROUPS = {
      'åŒ—éƒ¨': ['å°åŒ—', 'æ–°åŒ—', 'åŸºéš†', 'æ¡ƒåœ’', 'å®œè˜­', 'æ–°ç«¹'],
      'ä¸­éƒ¨': ['è‹—æ —', 'å°ä¸­', 'å½°åŒ–', 'å—æŠ•', 'é›²æ—'],
      'å—éƒ¨': ['å˜‰ç¾©', 'å°å—', 'é«˜é›„', 'å±æ±', 'æ¾æ¹–'],
      'æ±éƒ¨': ['èŠ±è“®', 'å°æ±'],
      'é›¢å³¶': ['é‡‘é–€', 'é¦¬ç¥–']
    };

    /* =============================================================================
       YouTube IFrame API å°±ç·’å›å‘¼ï¼š
       - åˆå§‹åŒ–å››æ ¼ç›´æ’­æ’­æ”¾å™¨ï¼ˆå„è‡ªè¼‰å…¥é è¨­å½±ç‰‡ï¼‰ã€‚
       - åˆå§‹åŒ–éŸ³æ¨‚æ’­æ”¾å™¨ï¼ˆåˆå§‹è¨­ç‚º mute: trueï¼Œé¿å…ç€è¦½å™¨é˜»æ“‹è‡ªå‹•æ’­æ”¾ï¼‰ã€‚
       - æ¸²æŸ“æ§åˆ¶åˆ—çš„ç¸£å¸‚/æ™¯é»æŒ‰éˆ•ã€‚
       - å•Ÿå‹•ç›´æ’­å»¶é²æª¢æ¸¬è¿´åœˆï¼ˆ5 ç§’å¾Œå•Ÿå‹•ï¼Œæ¯ 20 ç§’æª¢æŸ¥ä¸€æ¬¡ï¼‰ã€‚
       - ç¶å®š visibilitychangeï¼Œç•¶é é¢é‡æ–°å¯è¦‹æ™‚ï¼Œå˜—è©¦æ¢å¾©æ’­æ”¾ã€‚
       ============================================================================ */
    function onYouTubeIframeAPIReady() {
      // åˆå§‹åŒ–å››æ ¼ç›´æ’­æ’­æ”¾å™¨
      PLAYER_IDS.forEach((id, index) => {
        const defaultStreams = [
          "å°åŒ—-è²“ç©ºæŒ‡å—å®®",
          "æ¡ƒåœ’-åœ‹éš›æ©Ÿå ´",
          "å°ä¸­-é«˜ç¾æ¿•åœ°",
          "é«˜é›„-å£½å±±è§€æ™¯å°"
        ];
        const defaultKey = defaultStreams[index];
        const initialVideoId = (defaultKey && ALL_STREAMS[defaultKey]) ? ALL_STREAMS[defaultKey].id : DEFAULT_VIDEO_ID;

        players[index] = new YT.Player(id, {
          videoId: initialVideoId,
          playerVars: { autoplay: 1, controls: 0, modestbranding: 1, rel: 0, showinfo: 0, fs: 0, disablekb: 1, loop: 1, mute: 1, playsinline: 1 },
          events: { onReady: onPlayerReady, onStateChange: (event) => handleStateChange(event, index) }
        });

        // è¨˜éŒ„åˆå§‹ç‹€æ…‹ï¼Œç”¨æ–¼æ›´æ–°ä¸‹æ–¹æ¨™ç±¤
        if (defaultKey && ALL_STREAMS[defaultKey]) {
          streamState[index] = { key: defaultKey, ...ALL_STREAMS[defaultKey] };
          updateLabel(index);
        }
      });

      // åˆå§‹åŒ–éŸ³æ¨‚æ’­æ”¾å™¨ï¼šå…ˆéœéŸ³ä»¥é€šéç€è¦½å™¨çš„è‡ªå‹•æ’­æ”¾æ”¿ç­–ï¼Œ
      // å¾ŒçºŒåœ¨ä½¿ç”¨è€…äº’å‹•ï¼ˆrequestSong / playPauseï¼‰æ™‚å†è§£é™¤éœéŸ³ã€‚
      musicPlayer = new YT.Player('player_music', {
        playerVars: { autoplay: 0, controls: 0, modestbranding: 1, rel: 0, showinfo: 0, fs: 0, disablekb: 1, loop: 0, mute: 1, playsinline: 1 },
        events: { onReady: onMusicPlayerReady, onStateChange: onMusicPlayerStateChange }
      });

      // ç›´æ¥æ¸²æŸ“æ§åˆ¶åˆ—çš„ç¸£å¸‚èˆ‡æ™¯é»æŒ‰éˆ•ï¼ˆä¸å†ä½¿ç”¨ promptï¼‰
      renderRegionButtons();

      // å•Ÿå‹•ç›´æ’­å»¶é²æª¢æ¸¬ï¼ˆ5 ç§’å»¶é²ï¼Œé¿å…åˆå§‹è¼‰å…¥æœŸé–“èª¤åˆ¤ï¼‰
      setTimeout(() => {
        setInterval(checkStreamDelayLoop, 20000);
        console.log("âœ… ç›´æ’­å»¶é²æª¢æ¸¬ (æŒçºŒç›£æ¸¬) å·²å•Ÿå‹•ã€‚");
      }, 5000);

      // ç•¶é é¢é‡æ–°å¯è¦‹æ™‚ï¼Œå˜—è©¦è®“æ¯æ ¼æ’­æ”¾å™¨æ¢å¾©æ’­æ”¾
      document.addEventListener('visibilitychange', handleVisibilityChange);
    }

    /* =============================================================================
       ç›´æ’­æ’­æ”¾å™¨ onReadyï¼š
       - å˜—è©¦ playVideo()ï¼Œè‹¥è¢«ç€è¦½å™¨é˜»æ“‹ï¼Œè‡³å°‘ç¢ºä¿ä¹‹å¾Œèƒ½é€éä½¿ç”¨è€…äº’å‹•æ’­æ”¾ã€‚
       - 100ms å¾Œè®€å– getDuration()ï¼Œä»¥æ­¤ seekTo(liveDuration) å¼·åˆ¶è·³åˆ°ç›´æ’­å‰ç·£ï¼ˆLive Edgeï¼‰ã€‚
       - ç›®çš„ï¼šé¿å…è½å¾Œå¤ªå¤šé€ æˆæ¨è–¦æˆ–æ™‚ç§»å»¶é²ã€‚
       ============================================================================ */
    function onPlayerReady(event) {
      const player = event.target;
      const index = players.indexOf(player);
      try { player.setLoop(true); } catch(e) {}
      try { player.mute(); } catch(e) {}
      const playPromise = player.playVideo();
      if (playPromise && typeof playPromise.catch === 'function') {
        playPromise.catch(error => {
          console.warn(`ç•«é¢ ${index} è‡ªå‹•æ’­æ”¾è¢«é˜»æ­¢ï¼ˆå¯å¿½ç•¥ï¼‰ï¼š`, error);
        });
      }
      setTimeout(() => {
        try {
          const liveDuration = player.getDuration();
          if (liveDuration > 0) {
            player.seekTo(liveDuration, true);
            player.playVideo();
            console.log(`âœ… ç•«é¢ ${index} å·²åŸ·è¡Œ Live Edge å³æ™‚åŒæ­¥ã€‚`);
          }
        } catch(e) {
          console.error(`ç•«é¢ ${index} è¼‰å…¥æ™‚ç«‹å³è·³è½‰å¤±æ•—:`, e);
        }
      }, 100); 
    }

    /* =============================================================================
       ç›´æ’­æ’­æ”¾å™¨ç‹€æ…‹è®Šæ›´è™•ç†ï¼š
       - ENDEDï¼šå˜—è©¦ seekTo(liveDuration) ä»¥å›åˆ°ç›´æ’­å‰ç·£ï¼›å¤±æ•—å‰‡ loadVideoByIdã€‚
       - PAUSED/CUED/UNSTARTEDï¼šè‹¥éå»¶é²åˆ·æ–°ä¸­ï¼Œ300ms å¾Œæª¢æŸ¥ç‹€æ…‹ï¼Œå¿…è¦æ™‚ playVideoã€‚
       ============================================================================ */
    function handleStateChange(event, index) {
      const st = event.data;
      const player = players[index];
      const currentState = streamState[index];

      if (st === YT.PlayerState.ENDED) {
        if (currentState) {
          try {
            const liveDuration = player.getDuration();
            if (player && typeof player.seekTo === 'function' && liveDuration > 0) {
              player.seekTo(liveDuration, true);
              player.playVideo();
            } else {
              player.loadVideoById(currentState.id, 0);
              player.playVideo();
            }
          } catch(e) {
            try { player.loadVideoById(currentState.id, 0); player.playVideo(); } catch(e){}
          }
        }
        return; 
      }

      if (st === YT.PlayerState.PAUSED || st === YT.PlayerState.CUED || st === YT.PlayerState.UNSTARTED) {
        if (isReloading[index]) return;
        setTimeout(() => {
          try {
            const s = player.getPlayerState ? player.getPlayerState() : null;
            if (s !== YT.PlayerState.PLAYING && s !== YT.PlayerState.BUFFERING) {
              player.playVideo();
            }
          } catch(e){}
        }, 300);
      }
    }

    /* =============================================================================
       ç›´æ’­å»¶é²æª¢æ¸¬è¿´åœˆï¼š
       - æ¯ 20 ç§’æª¢æŸ¥ä¸€æ¬¡å„æ ¼æ’­æ”¾å™¨çš„ currentTime èˆ‡ durationã€‚
       - è‹¥ delay > 30 ç§’ ä¸”è·é›¢ä¸Šæ¬¡é‡è¼‰è¶…éå†·å»æ™‚é–“ï¼Œå‰‡å¼·åˆ¶ seekTo(liveDuration) æˆ–é‡è¼‰ã€‚
       - ç›®æ¨™ï¼šç¶­æŒåœ¨ç›´æ’­å‰ç·£ï¼Œé¿å…æ¨è–¦èˆ‡éç›´æ’­ç‹€æ…‹ã€‚
       ============================================================================ */
    function checkStreamDelayLoop() {
      const now = Date.now();
      players.forEach((player, index) => {
        if (!player || !streamState[index]) return;

        try {
          let current = 0, duration = 0;
          try { current = player.getCurrentTime ? player.getCurrentTime() : 0; } catch(e){}
          try { duration = player.getDuration ? player.getDuration() : 0; } catch(e){}

          // é¿å…åœ¨ IFrame å°šæœªæº–å‚™å¥½æ™‚èª¤åˆ¤ï¼ˆcurrent/duration éæ•¸å­—æˆ– <= 0ï¼‰
          if (!isFinite(current) || !isFinite(duration) || current <= 0 || duration <= 0) {
            if (player.getPlayerState() !== YT.PlayerState.PLAYING) {
              player.playVideo();
            }
            return;
          }

          const delay = duration - current;
          const state = streamState[index];

          if (delay > 30 && !isReloading[index] && (now - lastReloadAt[index] > RELOAD_COOLDOWN_MS)) {
            isReloading[index] = true;
            lastReloadAt[index] = now;
            console.log(`âš ï¸ ç•«é¢ ${index} è½å¾Œ ${Math.floor(delay)} ç§’ï¼ŒåŸ·è¡Œ Live Edge å¼·åˆ¶åŒæ­¥ã€‚`);
            const liveDuration = player.getDuration();

            try {
              if (player && typeof player.seekTo === 'function' && liveDuration > 0) {
                player.seekTo(liveDuration, true); 
                player.playVideo();
              } else {
                player.loadVideoById(state.id, liveDuration);
                player.playVideo();
              }
            } catch(e) {
              try { player.loadVideoById(state.id, liveDuration); player.playVideo(); } catch(e){}
            }
            setTimeout(() => { isReloading[index] = false; }, 3000); 
          }
        } catch(e) {
          console.error(`æª¢æŸ¥å»¶é²å¤±æ•— ${index}:`, e);
        }
      });
    }

    /* =============================================================================
       ç›´æ’­è¼”åŠ©å·¥å…·ï¼š
       - updateLabelï¼šæ›´æ–°æ¯æ ¼ä¸‹æ–¹æ¨™ç±¤é¡¯ç¤ºã€Œlabel + ä¾†æºã€ã€‚
       - handleVisibilityChangeï¼šé é¢è®Šå›å¯è¦‹æ™‚ï¼Œå˜—è©¦æ¢å¾©æ’­æ”¾ã€‚
       - selectCamï¼šåˆ‡æ›ç›®å‰è¦æ“ä½œçš„æ ¼ï¼ˆæ§åˆ¶å››æ ¼çš„ã€Œé¸ä¸­ã€ç‹€æ…‹ï¼‰ã€‚
       - setStreamï¼šåœ¨é¸ä¸­æ ¼è¼‰å…¥æŒ‡å®šç›´æ’­ï¼Œä¸¦æ›´æ–°æ¨™ç±¤ã€‚
       - å…¨è¢å¹•/æ¨™ç±¤éš±è—/å…¨å±€éœéŸ³ï¼šå°æ‡‰ UI æ“ä½œã€‚
       ============================================================================ */
    function updateLabel(index) {
      const state = streamState[index];
      const labelElement = document.getElementById(`label${index}`);
      if (state) {
        labelElement.innerHTML = `${state.label}<span class="source-on-screen">ä¾†æº: ${state.source}</span>`;
      } else {
        labelElement.innerHTML = `è¼‰å…¥ä¸­...<span class="source-on-screen"></span>`;
      }
    }

    function handleVisibilityChange() {
      if (!document.hidden) {
        players.forEach(player => {
          try {
            if (player.getPlayerState() !== YT.PlayerState.PLAYING) {
              player.playVideo();
            }
          } catch(e) {}
        });
      }
    }

    function selectCam(index) {
      selectedCamIndex = index;
      document.querySelectorAll('.controls button').forEach((btn, i) => {
        if (i >= 0 && i <= 3) btn.classList.toggle('active', i === index);
      });
      const player = players[selectedCamIndex];
      if (player && player.isMuted) {
        document.getElementById('muteBtn').innerText = player.isMuted() ? 'è§£é™¤éœéŸ³' : 'éœéŸ³';
      }
    }

    function setStream(streamKey) {
      const stream = ALL_STREAMS[streamKey];
      if (!stream) return;
      const player = players[selectedCamIndex];
      streamState[selectedCamIndex] = { key: streamKey, ...stream };
      
      try {
        player.loadVideoById(stream.id);
        player.mute(); // é è¨­ä¿æŒéœéŸ³ï¼Œé¿å…å¤šè·¯éŸ³è¨Šå¹²æ“¾
        updateLabel(selectedCamIndex);
        if (!isMuted) player.unMute(); // è‹¥å…¨å±€å·²è§£é™¤éœéŸ³ï¼Œç¶­æŒä¸€è‡´
        if (player && player.isMuted) {
          document.getElementById('muteBtn').innerText = player.isMuted() ? 'è§£é™¤éœéŸ³' : 'éœéŸ³';
        }
      } catch(e){
        console.error('è¼‰å…¥ç›´æ’­å¤±æ•—ï¼š', e);
      }
    }

    function toggleFullscreen() {
      const wrap = document.getElementById('stageWrap');
      const isFullscreen = document.body.classList.toggle('fullscreen-active');
      if (isFullscreen) {
        if (wrap.requestFullscreen) wrap.requestFullscreen();
        else if (wrap.webkitRequestFullscreen) wrap.webkitRequestFullscreen();
        else if (wrap.msRequestFullscreen) wrap.msRequestFullscreen();
      } else {
        if (document.exitFullscreen) document.exitFullscreen();
        else if (document.webkitExitFullscreen) document.webkitExitFullscreen();
        else if (document.msExitFullscreen) document.msExitFullscreen();
      }
    }

    function toggleLabels() {
      const body = document.body;
      const isHidden = body.classList.toggle('hide-labels');
      document.getElementById('labelsToggleBtn').innerText = isHidden ? 'é¡¯ç¤ºæ¨™ç±¤' : 'æ¨™ç±¤éš±è—';
    }

    function toggleMute() {
      isMuted = !isMuted;
      players.forEach(player => {
        try { isMuted ? player.mute() : player.unMute(); } catch(e){}
      });
      document.getElementById('muteBtn').innerText = isMuted ? 'è§£é™¤éœéŸ³' : 'éœéŸ³';
    }

    /* =============================================================================
       æ§åˆ¶åˆ—ç›´æ¥é¡¯ç¤ºç¸£å¸‚èˆ‡æ™¯é»ï¼š
       - ä¸å†ä½¿ç”¨ prompt å½ˆçª—ã€‚
       - ä¾ REGION_GROUPS çš„é †åºï¼Œæ¸²æŸ“ã€Œå€åŸŸæ¨™ç±¤ã€â†’ã€Œç¸£å¸‚æ¨™ç±¤ã€â†’ã€Œè©²ç¸£å¸‚æ‰€æœ‰æ™¯é»æŒ‰éˆ•ã€ã€‚
       - é»æ“Šæ™¯é»æŒ‰éˆ•å³åˆ»è¼‰å…¥åˆ°ã€Œç›®å‰é¸ä¸­çš„æ ¼ã€ã€‚
       ============================================================================ */
    function renderRegionButtons() {
      const container = document.getElementById('regionButtons');
      container.innerHTML = ''; 

      Object.keys(REGION_GROUPS).forEach(region => {
        const cities = REGION_GROUPS[region].filter(city => GROUPED_STREAMS[city] && GROUPED_STREAMS[city].length > 0);
        if (cities.length === 0) return;

        const regionLabel = document.createElement('span');
        regionLabel.className = 'region-label';
        regionLabel.textContent = region + 'ï¼š';
        container.appendChild(regionLabel);

        cities.forEach(city => {
          const streams = GROUPED_STREAMS[city];
          if (!streams || streams.length === 0) return;

          const cityLbl = document.createElement('span');
          cityLbl.className = 'city-label';
          cityLbl.textContent = city;
          container.appendChild(cityLbl);

          streams.forEach(stream => {
            const btn = document.createElement('button');
            btn.className = 'city-btn';
            btn.textContent = stream.label;
            btn.title = `${city} - ${stream.label}`;
            btn.onclick = () => setStream(stream.key);
            container.appendChild(btn);
          });
        });
      });
    }

    /* =============================================================================
       éŸ³æ¨‚æ’­æ”¾åŠŸèƒ½ï¼ˆPlaylist + å–®æ›²ä½‡åˆ—ï¼‰ï¼š
       - è¨­è¨ˆç›®æ¨™ï¼š
         1) æ”¯æ´ä½¿ç”¨è€…ç›´æ¥è¼¸å…¥ YouTubeã€Œå½±ç‰‡æˆ–æ¸…å–®ã€ç¶²å€/IDã€‚
         2) æ¸…å–®ä½¿ç”¨ loadPlaylist/cuePlaylistï¼Œç”± YouTube ç®¡ç†æ’­æ”¾é †åºã€‚
         3) å–®æ›²ä½¿ç”¨è‡ªè¨‚ä½‡åˆ— musicQueueï¼Œé€é¦– loadVideoById åˆ‡æ›ã€‚
         4) ç€è¦½å™¨è‡ªå‹•æ’­æ”¾æ”¿ç­–ï¼šåˆå§‹ muteï¼Œæ–¼ä½¿ç”¨è€…äº’å‹•æ™‚å† unMuteã€‚
       ============================================================================ */
    function onMusicPlayerReady() {
      isMusicReady = true;
      // ä¸ä¸»å‹•æ’­æ”¾ï¼Œç­‰å¾…ä½¿ç”¨è€…äº’å‹•ï¼ˆrequestSong / playPauseï¼‰ï¼Œä»¥ç¬¦åˆç€è¦½å™¨æ”¿ç­–ã€‚
    }

    function onMusicPlayerStateChange(event) {
      // ç•¶ä¸€é¦–çµæŸæ™‚ï¼Œè‡ªå‹•åˆ‡åˆ°ä¸‹ä¸€é¦–ï¼ˆæ¸…å–®æ¨¡å¼ç”± YouTube æ§åˆ¶ nextVideoï¼‰
      if (event.data === YT.PlayerState.ENDED) {
        skipToNextSong();
      }
    }

    // è§£æä½¿ç”¨è€…è¼¸å…¥çš„å½±ç‰‡æˆ–æ¸…å–® ID
    function extractVideoOrListId(input) {
      const urlOrId = input.trim();
      // å…ˆæŠ“æ¸…å–®
      const listMatch = urlOrId.match(/[?&]list=([a-zA-Z0-9_-]+)/);
      if (listMatch) return { type: 'list', id: listMatch[1] };
      // å†æŠ“å½±ç‰‡
      const videoMatch = urlOrId.match(/(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([^&?]+)/);
      if (videoMatch) return { type: 'video', id: videoMatch[1] };
      // ç´” IDï¼ˆå½±ç‰‡ ID é€šå¸¸ç‚º 11 å­—å…ƒï¼‰
      if (urlOrId.length === 11) return { type: 'video', id: urlOrId };
      return null;
    }

    // ä½¿ç”¨è€…è«‹æ±‚éŸ³æ¨‚ï¼ˆå¯è¼¸å…¥å½±ç‰‡æˆ–æ¸…å–®ï¼‰
    function requestSong() {
      const input = prompt("ğŸ¶ è¼¸å…¥ YouTube å½±ç‰‡/æ¸…å–®ç¶²å€æˆ– IDï¼š\nä¾‹ï¼šå½±ç‰‡ID: dQw4w9WgXcQï¼Œæˆ–å« list= çš„æ’­æ”¾æ¸…å–®ç¶²å€");
      if (!input) return;

      const parsed = extractVideoOrListId(input);
      if (!parsed) {
        alert("ç„¡æ•ˆçš„ YouTube ç¶²å€æˆ– IDã€‚");
        return;
      }

      // é¡¯ç¤ºéŸ³æ¨‚æ§åˆ¶åˆ—
      document.getElementById('musicControlsContainer').style.display = 'flex';
      // æ­¤ç‚ºä½¿ç”¨è€…äº’å‹•äº‹ä»¶ï¼Œå¯å˜—è©¦è§£é™¤éœéŸ³ä»¥ä¾¿å¾ŒçºŒæ’­æ”¾
      try { musicPlayer.unMute(); } catch(e) {}

      if (parsed.type === 'list') {
        // æ¸…å–®æ¨¡å¼ï¼šç”± YouTube å…§éƒ¨ playlist æ§åˆ¶é †åºèˆ‡åˆ‡æ›
        if (currentPlaylistId === parsed.id) {
          alert("è©²æ’­æ”¾æ¸…å–®å·²åœ¨æ’­æ”¾ä¸­ã€‚");
          return;
        }
        currentPlaylistId = parsed.id;
        musicQueue = [];        // æ¸…ç©ºå–®æ›²ä½‡åˆ—
        currentMusicIndex = -1; // é‡ç½®ç´¢å¼•

        // æ­£å¼è¼‰å…¥æ’­æ”¾æ¸…å–®ï¼ˆindex: 0 å¾ç¬¬ä¸€é¦–é–‹å§‹ï¼‰
        musicPlayer.loadPlaylist({ list: parsed.id, listType: 'playlist', index: 0, startSeconds: 0 });
        musicPlayer.playVideo();
        isPlaying = true;
        document.getElementById('playPauseBtn').innerText = 'â¸ï¸';
        alert(`âœ… å·²è¼‰å…¥æ’­æ”¾æ¸…å–® ID: ${parsed.id}`);
        return;
      }

      // å–®æ›²æ¨¡å¼ï¼šç¶­æŒè‡ªè¨‚ä½‡åˆ—ï¼ˆè‹¥ç›®å‰æœ‰æ¸…å–®åœ¨æ’­ï¼Œè¦æ±‚å…ˆåœæ­¢æ¸…å–®ï¼‰
      if (currentPlaylistId) {
        alert("è«‹å…ˆåœæ­¢æ’­æ”¾æ¸…å–®ï¼Œæˆ–æ”¹ç”¨æ’­æ”¾æ¸…å–®åŠ å…¥å½±ç‰‡ã€‚");
        return;
      }

      // åŠ å…¥ä½‡åˆ—ä¸¦åœ¨å¿…è¦æ™‚ç«‹å³æ’­æ”¾
      musicQueue.push(parsed.id);
      alert(`âœ… å·²å°‡å½±ç‰‡ ID: ${parsed.id} åŠ å…¥æ’­æ”¾åˆ—è¡¨ã€‚`);
      if (currentMusicIndex === -1) {
        currentMusicIndex = 0;
        loadAndPlayCurrentSong();
      } else if (musicPlayer.getPlayerState() === YT.PlayerState.ENDED) {
        skipToNextSong();
      }
    }

    // ä¾æ“š currentMusicIndex è¼‰å…¥ä¸¦æ’­æ”¾å–®æ›²
    function loadAndPlayCurrentSong() {
      if (!isMusicReady || musicQueue.length === 0) return;
      const songId = musicQueue[currentMusicIndex];
      musicPlayer.loadVideoById({ videoId: songId, startSeconds: 0 });
      try { musicPlayer.unMute(); } catch(e) {}
      musicPlayer.playVideo();
      isPlaying = true;
      document.getElementById('playPauseBtn').innerText = 'â¸ï¸';
    }
    
    // æ’­æ”¾/æš«åœåˆ‡æ›ï¼ˆé©ç”¨æ–¼æ¸…å–®èˆ‡å–®æ›²ï¼‰
    function playPauseSong() {
      const state = musicPlayer.getPlayerState();
      if (state === YT.PlayerState.PLAYING) {
          musicPlayer.pauseVideo();
          isPlaying = false;
          document.getElementById('playPauseBtn').innerText = 'â–¶ï¸';
      } else {
          try { musicPlayer.unMute(); } catch(e) {}
          musicPlayer.playVideo();
          isPlaying = true;
          document.getElementById('playPauseBtn').innerText = 'â¸ï¸';
      }
    }

    // ä¸‹ä¸€é¦–ï¼šæ¸…å–®æ¨¡å¼ä½¿ç”¨ nextVideoï¼Œå–®æ›²æ¨¡å¼ä¾ä½‡åˆ—èˆ‡æ¨¡å¼æ±ºå®šä¸‹ä¸€ç´¢å¼•
    function skipToNextSong() {
      if (currentPlaylistId) {
        musicPlayer.nextVideo();
        return;
      }
      if (musicQueue.length === 0) return;
      let nextIndex = playbackMode === 'listLoop'
        ? (currentMusicIndex + 1) % musicQueue.length
        : Math.floor(Math.random() * musicQueue.length);
      currentMusicIndex = nextIndex;
      loadAndPlayCurrentSong();
    }

    // ä¸Šä¸€é¦–ï¼šæ¸…å–®æ¨¡å¼ä½¿ç”¨ previousVideoï¼Œå–®æ›²æ¨¡å¼åœ¨å¾ªç’°æ¨¡å¼ä¸­å‘å‰ä¸€é¦–ï¼›éš¨æ©Ÿæ¨¡å¼å‰‡ç•¶ä½œä¸‹ä¸€é¦–éš¨æ©Ÿ
    function skipToPreviousSong() {
      if (currentPlaylistId) {
        musicPlayer.previousVideo();
        return;
      }
      if (musicQueue.length === 0) return;
      if (playbackMode === 'shuffle') {
        skipToNextSong();
        return;
      }
      let prevIndex = (currentMusicIndex - 1 + musicQueue.length) % musicQueue.length;
      currentMusicIndex = prevIndex;
      loadAndPlayCurrentSong();
    }

    // æ¨¡å¼è¨­å®š Modal é–‹é—œèˆ‡ç‹€æ…‹æ›´æ–°
    function openMusicSettingsModal() {
      document.getElementById('musicSettingsModal').style.display = 'flex';
      document.querySelectorAll('#musicSettingsModal .mode-btn').forEach(btn => btn.classList.remove('active'));
      document.getElementById('mode' + playbackMode.charAt(0).toUpperCase() + playbackMode.slice(1)).classList.add('active');
    }
    function closeMusicSettingsModal() { document.getElementById('musicSettingsModal').style.display = 'none'; }

    // è¨­å®šæ’­æ”¾æ¨¡å¼ï¼ˆåˆ—è¡¨å¾ªç’° / éš¨æ©Ÿï¼‰
    function setPlaybackMode(mode) {
      playbackMode = mode;
      alert(`æ’­æ”¾æ¨¡å¼å·²è¨­ç‚º: ${mode === 'listLoop' ? 'åˆ—è¡¨å¾ªç’°' : 'éš¨æ©Ÿæ’­æ”¾'}`);
      closeMusicSettingsModal();
    }

    // åœæ­¢éŸ³æ¨‚ä¸¦é—œé–‰ Modalï¼šé‡ç½®æ‰€æœ‰éŸ³æ¨‚ç‹€æ…‹ï¼Œéš±è—æ§åˆ¶åˆ—
    function stopAndCloseModal() {
      try { musicPlayer.stopVideo(); } catch(e){}
      try { musicPlayer.mute(); } catch(e){}
      currentMusicIndex = -1;
      musicQueue = [];
      currentPlaylistId = null;
      document.getElementById('musicControlsContainer').style.display = 'none';
      isPlaying = false;
      document.getElementById('playPauseBtn').innerText = 'â–¶ï¸';
      closeMusicSettingsModal();
    }
    
    // é¡¯ç¤ºæ’­æ”¾åˆ—è¡¨ç‹€æ…‹ï¼šæ¸…å–®æ¨¡å¼é¡¯ç¤ºæ¸…å–® IDï¼›å–®æ›²æ¨¡å¼é¡¯ç¤ºä½‡åˆ—èˆ‡ç›®å‰é …ç›®
    function showMusicQueueStatusModal() {
      const queueContentDiv = document.getElementById('queueListContent');
      let content = '';
      if (currentPlaylistId) {
        content = `<p style="color:#fff; font-size:14px; margin-top:0;">æ­£åœ¨æ’­æ”¾æ¸…å–® IDï¼š<br><span style="color:#0078d7;">${currentPlaylistId}</span></p>`;
        content += `<p style="color:#aaa; font-size:12px;">æ¸…å–®æ¨¡å¼ç”± YouTube ç®¡ç†é †åºã€‚</p>`;
      } else if (musicQueue.length === 0) {
        content = '<p style="text-align:center; color:#ccc;">æ’­æ”¾åˆ—è¡¨æ˜¯ç©ºçš„ã€‚</p>';
      } else {
        content += `<p style="color:#fff; font-size:14px; margin-top:0;">ç¸½è¨ˆï¼š${musicQueue.length} é¦– | æ¨¡å¼ï¼š${playbackMode === 'listLoop' ? 'å¾ªç’°' : 'éš¨æ©Ÿ'}</p><ul style="list-style:none; padding:0; max-height:200px; overflow-y:auto;">`;
        musicQueue.forEach((id, index) => {
          const isCurrent = index === currentMusicIndex;
          content += `<li style="padding:4px 0; font-size:13px; color:${isCurrent ? '#f90' : '#ccc'};">${isCurrent ? 'â–¶ï¸' : (index + 1)} ${id}</li>`;
        });
        content += '</ul>';
      }
      queueContentDiv.innerHTML = content;
      document.getElementById('musicQueueModal').style.display = 'flex';
    }
    function closeMusicQueueModal() { document.getElementById('musicQueueModal').style.display = 'none'; }
  </script>
</body>
</html>
